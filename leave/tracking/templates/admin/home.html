{% extends 'base.html' %}

{% block title %}
  Admin Home - Leave Management System
{% endblock %}

{% block extra_css %}
  <style>
    /* Admin Home Page Styles */
    .admin-home-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    .welcome-section {
      background: linear-gradient(135deg, var(--primary-green), var(--light-green));
      color: var(--white);
      padding: 3rem 2rem;
      border-radius: 15px;
      box-shadow: 0 8px 25px var(--shadow);
      margin-bottom: 3rem;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .welcome-section::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
    }

    .welcome-section h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
      font-weight: 700;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .welcome-section p {
      font-size: 1.2rem;
      opacity: 0.95;
      max-width: 600px;
      margin: 0 auto 2rem;
      line-height: 1.6;
    }

    .quick-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-bottom: 3rem;
    }

    .stat-card {
      background: var(--white);
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 6px 20px var(--shadow);
      text-align: center;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-green), var(--primary-orange));
    }

    .stat-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 30px var(--shadow);
    }

    .stat-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      display: block;
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: bold;
      color: var(--primary-green);
      margin-bottom: 0.5rem;
    }

    .stat-label {
      color: var(--text-light);
      font-size: 1rem;
      font-weight: 500;
    }

    .admin-sections {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .section-card {
      background: var(--white);
      border-radius: 15px;
      box-shadow: 0 6px 20px var(--shadow);
      overflow: hidden;
      transition: all 0.3s;
    }

    .section-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px var(--shadow);
    }

    .section-header {
      background: linear-gradient(135deg, var(--pale-green), var(--pale-orange));
      padding: 1.5rem;
      border-bottom: 3px solid var(--primary-green);
    }

    .section-header h3 {
      color: var(--primary-green);
      font-size: 1.4rem;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .section-header p {
      color: var(--text-light);
      font-size: 0.95rem;
    }

    .section-content {
      padding: 1.5rem;
    }

    .action-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
    }

    .action-btn {
      background: linear-gradient(135deg, var(--primary-green), var(--light-green));
      color: var(--white);
      padding: 1rem;
      border-radius: 10px;
      text-decoration: none;
      text-align: center;
      font-weight: 600;
      transition: all 0.3s;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      border: none;
      cursor: pointer;
    }

    .action-btn:hover {
      background: linear-gradient(135deg, var(--primary-orange), var(--light-orange));
      transform: translateY(-3px);
      box-shadow: 0 6px 15px var(--shadow);
    }

    .action-btn-icon {
      font-size: 1.5rem;
    }

    .recent-activity {
      background: var(--white);
      border-radius: 15px;
      box-shadow: 0 6px 20px var(--shadow);
      padding: 2rem;
    }

    .activity-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
      color: var(--primary-green);
    }

    .activity-header h3 {
      font-size: 1.4rem;
    }

    .activity-item {
      background: linear-gradient(135deg, var(--pale-green), var(--pale-orange));
      padding: 1rem;
      border-radius: 10px;
      margin-bottom: 1rem;
      border-left: 4px solid var(--primary-green);
      transition: all 0.3s;
    }

    .activity-item:hover {
      transform: translateX(5px);
      box-shadow: 0 4px 12px var(--shadow);
    }

    .activity-time {
      color: var(--text-light);
      font-size: 0.85rem;
      margin-bottom: 0.3rem;
    }

    .activity-text {
      color: var(--text-dark);
      font-weight: 500;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .admin-home-container {
        padding: 1rem;
      }

      .welcome-section {
        padding: 2rem 1rem;
      }

      .welcome-section h1 {
        font-size: 2rem;
      }

      .quick-stats {
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
      }

      .admin-sections {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }
    }

    @media (max-width: 480px) {
      .quick-stats {
        grid-template-columns: 1fr;
      }
    }
  </style>
{% endblock %}

{% block content %}
  <div class="admin-home-container">
    <div class="welcome-section">
      <h1>üè† Admin Control Center</h1>
      <p>Welcome to your comprehensive leave management dashboard. Monitor, manage, and maintain your organization's leave system with ease.</p>
    </div>

    <div class="quick-stats">
      <div class="stat-card">
        <span class="stat-icon">‚è≥</span>
        <div class="stat-number">{{ pending_count|default:0 }}</div>
        <div class="stat-label">Pending Requests</div>
      </div>
      <div class="stat-card">
        <span class="stat-icon">‚úÖ</span>
        <div class="stat-number">{{ approved_count|default:0 }}</div>
        <div class="stat-label">Approved Today</div>
      </div>
      <div class="stat-card">
        <span class="stat-icon">üë•</span>
        <div class="stat-number">{{ total_users|default:0 }}</div>
        <div class="stat-label">Total Users</div>
      </div>
      <div class="stat-card">
        <span class="stat-icon">üìä</span>
        <div class="stat-number">{{ total_requests|default:0 }}</div>
        <div class="stat-label">Total Requests</div>
      </div>
    </div>

    <div class="admin-sections">
      <div class="section-card">
        <div class="section-header">
          <h3>üìã Request Management</h3>
          <p>Handle leave requests and approvals</p>
        </div>
        <div class="section-content">
          <div class="action-grid">
            <a href="{% url 'admin_requests' %}" class="action-btn">
              <span class="action-btn-icon">üìä</span>
              Requests Dashboard
            </a>
            <a href="{% url 'leave_history' %}" class="action-btn">
              <span class="action-btn-icon">üìà</span>
              All Requests
            </a>
            <a href="{% url 'admin_tracking' %}" class="action-btn">
              <span class="action-btn-icon">üîç</span>
              Track Leaves
            </a>
          </div>
        </div>
      </div>

      <div class="section-card">
        <div class="section-header">
          <h3>üë• User Management</h3>
          <p>Manage users and administrators</p>
        </div>
        <div class="section-content">
          <div class="action-grid">
            <a href="{% url 'admin_users' %}" class="action-btn">
              <span class="action-btn-icon">üë§</span>
              All Users
            </a>
            <a href="{% url 'create_admin' %}" class="action-btn">
              <span class="action-btn-icon">üë®‚Äçüíº</span>
              Create Admin
            </a>
          </div>
        </div>
      </div>

      <div class="section-card">
        <div class="section-header">
          <h3>‚öôÔ∏è System Tools</h3>
          <p>Administrative tools and settings</p>
        </div>
        <div class="section-content">
          <div class="action-grid">
            <a href="{% url 'profile' %}" class="action-btn">
              <span class="action-btn-icon">‚öôÔ∏è</span>
              Settings
            </a>
            <a href="/admin/" class="action-btn" target="_blank">
              <span class="action-btn-icon">üîß</span>
              Django Admin
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="recent-activity">
      <div class="activity-header">
        <span>üïí</span>
        <h3>Recent Activity</h3>
      </div>
      
      {% if recent_requests %}
        {% for request in recent_requests %}
          <div class="activity-item">
            <div class="activity-time">{{ request.submitted_on|timesince }} ago</div>
            <div class="activity-text">
              <strong>{{ request.user.username }}</strong> submitted {{ request.get_leave_type_display }} request 
              ({{ request.start_date }} - {{ request.end_date }})
            </div>
          </div>
        {% endfor %}
      {% else %}
        <div class="activity-item">
          <div class="activity-text">No recent activity to display</div>
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}